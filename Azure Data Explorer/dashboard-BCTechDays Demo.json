{
    "$schema": "https://dataexplorer.azure.com/static/d/schema/52/dashboard.json",
    "id": "5a38b901-6953-4767-8166-e207a34cc63a",
    "eTag": "7adcb0ab-5dec-4534-9a38-4514222916d7",
    "schema_version": "52",
    "title": "BCTechDays Demo",
    "tiles": [
        {
            "id": "58a9d2a6-ef15-45a7-a081-8bd645783134",
            "title": "All Companies",
            "visualType": "table",
            "pageId": "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59",
            "layout": {
                "x": 0,
                "y": 6,
                "width": 9,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "5c2e55e9-01ea-4b8c-a0de-a68db5f60361"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "36af83a5-9ea2-437f-b877-1a994d272189",
            "title": "Events",
            "visualType": "table",
            "pageId": "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 17,
                "height": 5
            },
            "queryRef": {
                "kind": "query",
                "queryId": "1e7104bc-e050-402a-b9a9-c59e69d2fa02"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "493ffb0e-905d-4269-96cd-34ef121ba65f",
            "title": "Events",
            "visualType": "table",
            "pageId": "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59",
            "layout": {
                "x": 9,
                "y": 6,
                "width": 12,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "e5378610-84e7-4891-832e-045cc28447ef"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": [
                    {
                        "urlColumn": "LearnUrl",
                        "displayColumn": "eventId",
                        "disabled": false
                    }
                ]
            }
        },
        {
            "id": "11216497-2ca2-4190-b810-0f96fa24e582",
            "title": "Externaldata (All Events)",
            "visualType": "table",
            "pageId": "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
            "layout": {
                "x": 0,
                "y": 5,
                "width": 8,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "02912e9b-479d-40ee-b7b5-2b31ab9e0b78"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "d796a89e-5f66-4992-bb0b-8d5130c4fd5f",
            "title": "Events (external data)",
            "visualType": "table",
            "pageId": "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
            "layout": {
                "x": 0,
                "y": 12,
                "width": 17,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "0247818d-c670-45e9-aa58-eff3d716ce56"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "c6ffe9c3-dc2d-4035-893a-cd2de16dc879",
            "title": "Custom Events (Microsoft)",
            "visualType": "table",
            "pageId": "f56f5822-56bf-4758-a589-1e398df2aeee",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 9,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "4b55db01-ebc3-415d-9294-400f4b64efd4"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "5d761873-80b0-4e93-84ef-b27472d05f1a",
            "title": "Custom Events (Not Microsoft)",
            "visualType": "table",
            "pageId": "f56f5822-56bf-4758-a589-1e398df2aeee",
            "layout": {
                "x": 9,
                "y": 0,
                "width": 9,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "fe5ecfb2-f74c-4f41-96a1-cf0f75cdffde"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "58e67413-3cc1-4564-8e5a-a0d73bbfe552",
            "title": "Telemetry on Tests",
            "visualType": "table",
            "pageId": "fbdd4db5-d977-4a56-997e-4043d8c0645f",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 18,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "301dcad5-9b2d-405c-856f-5710eed4301b"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "eb1403d0-3a9e-4657-ac02-ebc2bdb2a04e",
            "title": "Tests - Codeunits",
            "visualType": "line",
            "pageId": "fbdd4db5-d977-4a56-997e-4043d8c0645f",
            "layout": {
                "x": 0,
                "y": 7,
                "width": 18,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "bb13bc7c-1580-415e-ab82-d6275ab5dc7e"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "7bfebbac-36c9-4eb1-9ec0-21b1ffc1919c",
            "title": "All Executions",
            "visualType": "table",
            "pageId": "e057b00e-7fd8-476e-a00c-3421e7656af8",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 10,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "15432824-d23f-461a-a1e1-bd8a16d045f9"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "2b3554f0-62a7-4f05-8645-775d16ce0537",
            "title": "Averages per customers",
            "visualType": "table",
            "pageId": "e057b00e-7fd8-476e-a00c-3421e7656af8",
            "layout": {
                "x": 10,
                "y": 0,
                "width": 9,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "5a6f47e4-e5fd-4628-a326-442d90d84071"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "879a3f9f-2039-47dc-bf27-5b7e41ffa086",
            "title": "Sales-Post Order (per day)",
            "visualType": "line",
            "pageId": "e057b00e-7fd8-476e-a00c-3421e7656af8",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 19,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "cf09ab4b-b3e5-4b86-8131-739cf4a4c197"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "avgDuration"
                ],
                "seriesColumns": [
                    "tenantDescription"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "db42d8cc-fc8f-4d9d-a468-f42b7d9c5b15",
            "title": "Missing Indexes",
            "visualType": "table",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 3,
                "width": 19,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "3dab323e-751c-48b3-a9d6-bac0e790918d"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "902f4361-9100-49e1-b7f0-a503960e3ff3",
            "title": "Missing Indexes (By missing index)",
            "visualType": "table",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 11,
                "width": 13,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "02486b0e-518e-46da-92d8-6cc2ba08e53a"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "370c3e16-a1a1-46c0-9a70-931ece74d3ac",
            "title": "Missing Indexes per Customer",
            "visualType": "table",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 13,
                "y": 11,
                "width": 6,
                "height": 8
            },
            "queryRef": {
                "kind": "query",
                "queryId": "2bb81e83-9211-4bec-83b0-5baff0d35e08"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "a3abee56-9597-4fa6-9076-f91c8577cc18",
            "title": "Missing indexes over time",
            "visualType": "stackedcolumn",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 19,
                "width": 19,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "5cff630c-ef14-4e1f-b40e-9d3a6a698867"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "037f192e-e64c-4a41-8406-93bfb5334e5e",
            "title": "Media Orphans Info",
            "visualType": "table",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 29,
                "width": 9,
                "height": 11
            },
            "queryRef": {
                "kind": "query",
                "queryId": "825f089d-15a9-46b2-a443-dab91abe062d"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "aea7e8a4-6a7a-4bd2-8f70-b79ba6e99ce6",
            "title": "2.",
            "visualType": "markdownCard",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 26,
                "width": 19,
                "height": 3
            },
            "markdownText": "# Media Orphans Info\n",
            "visualOptions": {}
        },
        {
            "id": "a3f0dce1-796d-4af3-8d3b-ea8f967d69ec",
            "title": "1.",
            "visualType": "markdownCard",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 9,
                "height": 3
            },
            "markdownText": "# Missing Indexes\n",
            "visualOptions": {}
        },
        {
            "id": "aaeb043d-d981-40c7-8b77-807143029777",
            "title": "Orphan problems",
            "visualType": "column",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 0,
                "y": 40,
                "width": 19,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "932751d1-6d30-4c2e-a0ce-c27de5075c1c"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": [
                    "message",
                    "aadTenantId"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "b09c500b-5a3d-4c3d-96f7-ee65f204728a",
            "title": "Current Orphans per customer",
            "visualType": "table",
            "pageId": "9c16317e-23f7-4e29-8a61-dfae292ea6d0",
            "layout": {
                "x": 9,
                "y": 29,
                "width": 7,
                "height": 11
            },
            "queryRef": {
                "kind": "query",
                "queryId": "b280d7b0-9d91-4519-ac8d-402a08809e2d"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "8b18a687-a7ff-4d33-bffc-0d2ab9c25025",
            "title": "1.",
            "visualType": "markdownCard",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 20,
                "height": 3
            },
            "markdownText": "# Partial Records\n",
            "visualOptions": {}
        },
        {
            "id": "13d901f3-4d4b-4c9c-9709-7dfc79754f58",
            "title": "Partial Records",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 3,
                "width": 20,
                "height": 9
            },
            "queryRef": {
                "kind": "query",
                "queryId": "4e4c1175-f51c-4a95-a505-e62068f35f25"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "0bf7f557-415a-4742-bca6-bf0fbf8357c9",
            "title": "No Of Columns by Extension",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 12,
                "width": 10,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "adf15579-17d1-4526-a373-0957fc9f69d6"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "ede47df1-472f-434c-bfc3-00b8a0f0c83a",
            "title": "No Of Columns by Table",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 10,
                "y": 12,
                "width": 10,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "e1a32997-8e14-43dd-a9e6-dd2eed692298"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "8beffbc9-847c-4980-8699-58206c9c9851",
            "title": "2.",
            "visualType": "markdownCard",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 19,
                "width": 20,
                "height": 3
            },
            "markdownText": "# Locking",
            "visualOptions": {}
        },
        {
            "id": "663a3dd0-2c2e-41e5-b816-15f8e709ff4b",
            "title": "Locking IsEmpty",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 22,
                "width": 13,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "dca21fc1-e6f6-459d-bff7-c72108795bc7"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "c520b0d4-e9e8-4cb2-816f-c0f8077cbcbb",
            "title": "IsEmpty by Extension",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 13,
                "y": 22,
                "width": 7,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "776a635c-6ff1-4749-ad61-9e5bb2182b48"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "a985afb8-3934-4da9-920c-d61dceee5383",
            "title": "Locking Calcsums",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 28,
                "width": 13,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "a967a2fe-5407-41b1-8c82-3651cb125c79"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "71c09f6b-3125-4a80-9d49-27a28b47e2f9",
            "title": "Calcsums by Extension",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 13,
                "y": 28,
                "width": 7,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "5972df64-ef68-4fa4-a3d0-ed0ffd4b5e41"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "d6721bfe-13f2-4b0f-b9f1-cba1422c9584",
            "title": "Locking Counts",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 0,
                "y": 34,
                "width": 13,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "25fea7fd-91f0-44c7-a592-c74398eded5e"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "e87dead3-c5f4-4ce2-bedb-bbfab681531a",
            "title": "Count by Extension",
            "visualType": "table",
            "pageId": "2546cc61-63e2-4e89-8157-d2977e6ddde6",
            "layout": {
                "x": 13,
                "y": 34,
                "width": 7,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "f31ab0c2-398a-4193-9997-00660d1d01d6"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "8dc2d36b-69e2-4d37-8e20-29ddd36df1e3",
            "title": "Last Deadlocks",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 31,
                "width": 15,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "38d0a40a-e1c8-43a0-b07c-2f6a4af53fc3"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "28064c11-c393-4849-975a-b2e7f404e731",
            "title": "1.",
            "visualType": "markdownCard",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 20,
                "height": 3
            },
            "markdownText": "# API Calls",
            "visualOptions": {}
        },
        {
            "id": "dd110ace-993f-4bda-9fa9-c88ce5a3ba84",
            "title": "DeadLocks By Customer",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 15,
                "y": 31,
                "width": 5,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "6f2c9fc4-913c-4c16-a95a-dc58fa5fa8fe"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "7fc032e1-51ee-466f-ba81-fea165764dd6",
            "title": "Deadlocks by hour",
            "visualType": "stackedcolumn",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 38,
                "width": 20,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "b1133f97-4203-4fd2-8205-71e34abe87b6"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "6d2e8a36-4f35-401b-8e59-a179df48be20",
            "title": "Summery",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 44,
                "width": 20,
                "height": 9
            },
            "queryRef": {
                "kind": "query",
                "queryId": "094a8df7-535d-4218-b9a7-c6b52f4bc72b"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "6a28c367-2f8d-4518-9c64-3f56a4f635b2",
            "title": "Locking Object",
            "visualType": "pie",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 10,
                "y": 53,
                "width": 10,
                "height": 12
            },
            "queryRef": {
                "kind": "query",
                "queryId": "591c9099-a79d-4cb7-af9b-8da336877861"
            },
            "visualOptions": {
                "hideLegend": true,
                "xColumn": "LockingObject",
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "5ae67d35-441f-4f50-b4cb-581ce485b7d7",
            "title": "Source Process",
            "visualType": "pie",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 53,
                "width": 10,
                "height": 12
            },
            "queryRef": {
                "kind": "query",
                "queryId": "4dee6fb0-18f4-4a6b-ada7-0eb763e72145"
            },
            "visualOptions": {
                "hideLegend": true,
                "xColumn": "SourceProcess",
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": true,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "202772f1-642c-4f03-8fc8-2c3221d51ec1",
            "title": "3.",
            "visualType": "markdownCard",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 65,
                "width": 20,
                "height": 3
            },
            "markdownText": "# Lock Timeouts",
            "visualOptions": {}
        },
        {
            "id": "c54267c7-cd9f-4d7d-ace5-07c4f51753b6",
            "title": "Last Lock Timeouts",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 68,
                "width": 14,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "43a64111-354c-4b1e-b4f9-4087a8a85afa"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "d0ae2747-309d-494b-82cd-8d799cc46c1b",
            "title": "Lock Timeouts By Customer",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 14,
                "y": 68,
                "width": 6,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "d28506c3-6290-4a90-b507-328b79cddcee"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "78fba414-a825-4909-8160-cd65063e2aff",
            "title": "Lock Timeouts by hour",
            "visualType": "stackedcolumn",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 75,
                "width": 20,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "4470f98b-96f0-467f-abd8-e5567f539cdf"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "73b1cef1-fe54-4213-ac87-3f5684c4c233",
            "title": "Lock Timeouts by Source Process",
            "visualType": "pie",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 81,
                "width": 10,
                "height": 12
            },
            "queryRef": {
                "kind": "query",
                "queryId": "7f52dca6-2c79-4955-8d19-d0353e248111"
            },
            "visualOptions": {
                "hideLegend": true,
                "xColumn": "SourceProcess",
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": true,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "0c2d9c72-e771-46c9-901c-ee85b05bf01f",
            "title": "Lock Timeouts by Locking Object",
            "visualType": "pie",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 10,
                "y": 81,
                "width": 10,
                "height": 12
            },
            "queryRef": {
                "kind": "query",
                "queryId": "685f320c-b46b-4010-80c1-74169f5d6dcb"
            },
            "visualOptions": {
                "hideLegend": true,
                "xColumn": "LockingObject",
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "00cfeb83-510c-4317-97b7-34c2772c1e2c",
            "title": "2.",
            "visualType": "markdownCard",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 28,
                "width": 20,
                "height": 3
            },
            "markdownText": "# Deadlocks",
            "visualOptions": {}
        },
        {
            "id": "7d036709-66c6-4a5f-977b-5c2984d9c050",
            "title": "API Calls by Customer",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 3,
                "width": 12,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "47998632-9b91-475a-8b5d-e9b824a70673"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "c5718320-ed81-4242-8837-c2baa39149db",
            "title": "By Day",
            "visualType": "column",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 12,
                "y": 3,
                "width": 8,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "7b447e46-2578-4bba-ac9d-a55569727ace"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "avgTime"
                ],
                "seriesColumns": [
                    "tenantDescription"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "25cd2e5e-a56f-4836-90ec-76bbaaa8403c",
            "title": "Number of signals last 90 days",
            "visualType": "timechart",
            "pageId": "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 21,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "9342f2ed-1ac6-4c33-ab85-877cdbe5bf59"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "827edbab-5dad-4efe-8f09-f4dcb58d82bc",
            "title": "Per Object",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 9,
                "width": 20,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "46c51880-d6c6-41d7-811e-58429e0ae286"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "7e173913-870b-4a69-9612-2b9808f19254",
            "title": "Top 10 Companies",
            "visualType": "bar",
            "pageId": "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59",
            "layout": {
                "x": 0,
                "y": 13,
                "width": 21,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "29ed362b-db00-426b-8a7d-2604200272c5"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "9690b5e2-14b1-43d6-9679-dfc7fcb765e4",
            "title": "Base Query - Sanity check",
            "visualType": "table",
            "pageId": "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
            "layout": {
                "x": 0,
                "y": 20,
                "width": 5,
                "height": 5
            },
            "queryRef": {
                "kind": "query",
                "queryId": "fd338a5f-a63c-494d-846f-d64af8d857a0"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "715ec90f-2677-4b05-9519-019044f90a70",
            "title": "Externaldata (TenantDescriptions)",
            "visualType": "table",
            "pageId": "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
            "layout": {
                "x": 8,
                "y": 5,
                "width": 9,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "b86ff589-0f6d-450d-bc57-f785b3a9c35a"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "54adc8ae-ac63-4c66-b25b-cf91ae22d747",
            "title": "4.",
            "visualType": "markdownCard",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 93,
                "width": 20,
                "height": 3
            },
            "markdownText": "# Slow stuff",
            "visualOptions": {}
        },
        {
            "id": "b00671f6-d51a-4b8e-8bce-7ec63dd93eda",
            "title": "Slowest \"anything\", per customer (Top 100)",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 96,
                "width": 10,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "7b092ba5-f9dd-4a62-8454-b81f5384400a"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "94b63d5e-c7e9-4b93-b424-da05e32d56c9",
            "title": "API Calls per hour",
            "visualType": "stackedcolumn",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 21,
                "width": 20,
                "height": 7
            },
            "queryRef": {
                "kind": "query",
                "queryId": "1bf1ec03-a8e5-4032-96db-e97cc928023c"
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "c6f03b3d-9a8f-4c1a-85c4-31fcad5ed112",
            "title": "Details",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 15,
                "width": 20,
                "height": 6
            },
            "queryRef": {
                "kind": "query",
                "queryId": "54acac7b-c84e-48f5-a3b5-7b3d5b1cc5eb"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "58c00ae2-bd81-4052-a198-b2f3d7c1ed2c",
            "title": "Last Slow SQL Calls (Top 1000)",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 103,
                "width": 20,
                "height": 13
            },
            "queryRef": {
                "kind": "query",
                "queryId": "b62f5ea9-fe88-4bbc-8c61-e6999a017385"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        },
        {
            "id": "0b4d1b24-4def-42d0-87a5-df6e61b0633f",
            "title": "Per Slow Object",
            "visualType": "pie",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 0,
                "y": 116,
                "width": 10,
                "height": 17
            },
            "queryRef": {
                "kind": "query",
                "queryId": "48849c14-b50e-49b7-916f-0238dacaca4c"
            },
            "visualOptions": {
                "hideLegend": true,
                "xColumn": null,
                "yColumns": [
                    "count_"
                ],
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            }
        },
        {
            "id": "d8c5d187-b5b1-4731-afbd-da8381a048bb",
            "title": "Per Slow Object",
            "visualType": "table",
            "pageId": "142b6efb-d730-4b92-a9f1-c8311c35f795",
            "layout": {
                "x": 10,
                "y": 116,
                "width": 10,
                "height": 17
            },
            "queryRef": {
                "kind": "query",
                "queryId": "76f4c75a-d946-48b9-ac09-42e4900ba460"
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            }
        }
    ],
    "baseQueries": [
        {
            "id": "7a1d5fc7-745d-4394-969c-a8d20e4d9957",
            "queryId": "b4447fa9-6a67-4b52-9f4f-ebb809cdce7a",
            "variableName": "AllSignals_Customers"
        },
        {
            "id": "483909ea-7cc7-4669-bc15-c963283615fd",
            "queryId": "6be88230-711c-475b-ac25-4f5dc82ea567",
            "variableName": "AllSignals_Distri"
        },
        {
            "id": "193540ec-c799-464d-955f-703d696e68e3",
            "queryId": "41eae0b2-ce5f-4a14-905e-1880e74c8276",
            "variableName": "AllTraces_Customers"
        },
        {
            "id": "ef1f41fe-d48a-484a-a735-784c2780f8ca",
            "queryId": "6bb31b2e-59c5-4bb5-80fb-f6104d232c0b",
            "variableName": "AllTraces_Distri"
        },
        {
            "id": "cabb2262-deb2-47a7-b3cb-21728bc9383f",
            "queryId": "c16ecbde-301a-4165-b320-861ce72d9ddf",
            "variableName": "AllTracesWithDefaultFilters_Customers"
        },
        {
            "id": "5c9316e1-ea20-4c0e-922e-5c3d55ce69e1",
            "queryId": "52c36f7f-5e57-40c8-b830-da83f744dd51",
            "variableName": "AllTracesWithDefaultFilters_DistriApps"
        }
    ],
    "parameters": [
        {
            "kind": "duration",
            "id": "39cdef5b-3452-4363-abb8-14af11fec305",
            "displayName": "Time range",
            "description": "",
            "beginVariableName": "_startTime",
            "endVariableName": "_endTime",
            "defaultValue": {
                "kind": "dynamic",
                "count": 1,
                "unit": "hours"
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "string",
            "selectionType": "freetext",
            "id": "53f0f6f5-2267-429a-8206-737d975dcce7",
            "displayName": "CompanyFilter",
            "variableName": "_CompanyFilter",
            "description": "",
            "defaultValue": {
                "kind": "all"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59"
                ]
            }
        },
        {
            "kind": "string",
            "selectionType": "freetext",
            "id": "188fb724-d624-493e-a504-ea84e190c35c",
            "displayName": "MessageFilter",
            "variableName": "_MessageFilter",
            "description": "",
            "defaultValue": {
                "kind": "all"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "767419b8-bb1b-4f95-9790-6e9f47cae7a1",
                    "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59",
                    "fbdd4db5-d977-4a56-997e-4043d8c0645f",
                    "142b6efb-d730-4b92-a9f1-c8311c35f795"
                ]
            }
        },
        {
            "kind": "string",
            "id": "bb15f72d-08d9-44a3-9ff3-1192ffc5c4ea",
            "displayName": "Area",
            "description": "",
            "variableName": "_Area",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Area"
                },
                "queryRef": {
                    "kind": "query",
                    "queryId": "6a47afd3-77c6-4aff-91bc-7bb75738d805"
                },
                "autoReset": true
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "767419b8-bb1b-4f95-9790-6e9f47cae7a1"
                ]
            }
        },
        {
            "kind": "string",
            "id": "89494460-b823-402b-a4b8-19b08049e258",
            "displayName": "entraTenantId",
            "description": "entraTenantId",
            "variableName": "_entraTenantId",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "entraTenantId"
                },
                "queryRef": {
                    "kind": "query",
                    "queryId": "71ca975a-d9b2-4d13-8d67-1d64db31474b"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "string",
            "id": "acf0dd80-5e90-4694-abd9-f57aee6bf9f3",
            "displayName": "ExtensionName",
            "description": "",
            "variableName": "_extensionName",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "extensionName"
                },
                "queryRef": {
                    "kind": "query",
                    "queryId": "36ef728f-ac65-40a1-bced-e736af02e457"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "string",
            "selectionType": "freetext",
            "id": "9a07b670-cbc8-46e4-b700-2f8a21677ca8",
            "displayName": "TableFilter",
            "variableName": "_tableFilter",
            "description": "",
            "defaultValue": {
                "kind": "all"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "9c16317e-23f7-4e29-8a61-dfae292ea6d0"
                ]
            }
        },
        {
            "kind": "string",
            "id": "c74760eb-82d3-4ea6-807f-f87f1462b27e",
            "displayName": "TenantDescription",
            "description": "",
            "variableName": "_TenantDescription",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "tenantDescription"
                },
                "queryRef": {
                    "kind": "query",
                    "queryId": "d3d54edb-5018-4004-9043-613f0728f0b3"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "string",
            "selectionType": "freetext",
            "id": "9ef8005d-e709-4e8c-887f-8e71a49833e9",
            "displayName": "SourceObjectFilter",
            "variableName": "_sourceObjectFilter",
            "description": "",
            "defaultValue": {
                "kind": "all"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "142b6efb-d730-4b92-a9f1-c8311c35f795"
                ]
            }
        },
        {
            "kind": "string",
            "selectionType": "freetext",
            "id": "f115ee5f-4c2f-461a-8d90-c880e546aeae",
            "displayName": "SlowObject",
            "variableName": "_SlowObjectFilter",
            "description": "",
            "defaultValue": {
                "kind": "all"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "142b6efb-d730-4b92-a9f1-c8311c35f795"
                ]
            }
        },
        {
            "kind": "string",
            "id": "ce8713cf-d172-4bef-95c8-dd3652bfeb88",
            "displayName": "eventId",
            "description": "",
            "variableName": "_eventId",
            "selectionType": "scalar",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "eventId"
                },
                "queryRef": {
                    "kind": "query",
                    "queryId": "9492a17c-eb5f-4b81-a06c-9dbc84c9249e"
                }
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59"
                ]
            }
        }
    ],
    "dataSources": [
        {
            "id": "05ae5610-5603-45ac-9458-616539c1c150",
            "name": "AI-CustomerNST",
            "scopeId": "kusto",
            "clusterUri": "https://ade.applicationinsights.io/subscriptions/a8341168-f467-4146-ba71-5e2e523dccb5",
            "database": "AI-CustomerNST",
            "kind": "manual-kusto"
        },
        {
            "id": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d",
            "kind": "manual-kusto",
            "scopeId": "kusto",
            "name": "AI-DistriApps",
            "clusterUri": "https://ade.applicationinsights.io/subscriptions/a8341168-f467-4146-ba71-5e2e523dccb5",
            "database": "AI-DistriApps"
        }
    ],
    "pages": [
        {
            "name": "Intro ADE",
            "id": "767419b8-bb1b-4f95-9790-6e9f47cae7a1"
        },
        {
            "name": "Usage",
            "id": "e0ea770f-baf5-47a6-88b1-1cb0ec5dce59"
        },
        {
            "name": "Performance",
            "id": "142b6efb-d730-4b92-a9f1-c8311c35f795"
        },
        {
            "name": "Dev Analysis",
            "id": "2546cc61-63e2-4e89-8157-d2977e6ddde6"
        },
        {
            "name": "CT: Custom Events",
            "id": "f56f5822-56bf-4758-a589-1e398df2aeee"
        },
        {
            "name": "CT: Tests",
            "id": "fbdd4db5-d977-4a56-997e-4043d8c0645f"
        },
        {
            "name": "CT: Performance",
            "id": "e057b00e-7fd8-476e-a00c-3421e7656af8"
        },
        {
            "name": "CT: Daily Statistics",
            "id": "9c16317e-23f7-4e29-8a61-dfae292ea6d0"
        },
        {
            "name": "BCPT",
            "id": "c57aad53-d31f-4c8c-a0b7-39424d755d88"
        }
    ],
    "queries": [
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where eventId contains _eventId\n// | where timestamp between (_startTime .. _endTime)// adjust as needed\n// | where aadTenantId has_any (_entraTenantId)\n// | where tenantDescription has_any (_TenantDescription)\n| where isnotempty(customDimensions.environmentType)\n| where isnotempty(customDimensions.companyName)\n| extend companyName = tostring(customDimensions.companyName)\n| extend environmentName = tostring(customDimensions.environmentName)\n| extend IsSaas  = iff(isempty(environmentName) or environmentName in ('common','null','default','undefined'),false,true)\n| extend environmentType = iff(tobool(IsSaas),tostring(customDimensions.environmentType), \n                                iff(isempty(environmentName) or environmentName in ('common','null','default','undefined'),'OnPrem','SaaS'))\n| where environmentType == 'Production'\n    or (environmentName !contains 'TEST'\n    and environmentName !contains 'QA'\n    and environmentName !contains 'TRAINING')\n| summarize by aadTenantId, tenantDescription, companyName, environmentName, environmentType, IsSaas\n| order by IsSaas\n| where companyName contains _CompanyFilter",
            "id": "5c2e55e9-01ea-4b8c-a0de-a68db5f60361",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_CompanyFilter",
                "_eventId"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where isnotempty(customDimensions.eventId)\n| extend submsg = iif(substring(message, 0, 4) == \"Task\", \"Task Executed\", \n                    iif(customDimensions.eventId == \"AL0000JRG\", \"Job Queue Error\",\n                        iff(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))))\n| extend eventId = customDimensions.eventId\n    , status = iif(submsg has \"called\" \n                    or submsg has \"executed\"\n                        or submsg has 'executed'\n                            or submsg has 'succeeded'\n                                or submsg has 'rendered'\n                                    or submsg has 'successfully'\n                                        or submsg has 'taken', \"success\",\n                    iif(submsg has \"error\"\n                            or submsg has 'fail'\n                                or submsg has 'failed'\n                                    or submsg has 'deadlock'\n                                        or submsg has 'timed out',\"error\",\n                        iif(message has 'exceeded', 'too slow',\n                            \"unknown\")))\n| where submsg contains _MessageFilter\n| summarize count = count() by tostring(eventId), tostring(submsg), status\n| order by ['count'] desc\n",
            "id": "1e7104bc-e050-402a-b9a9-c59e69d2fa02",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.eventId)\n| where eventId contains _eventId\n| extend submsg = iif(substring(message, 0, 4) == \"Task\", \"Task Executed\", \n                    iif(customDimensions.eventId == \"AL0000JRG\", \"Job Queue Error\",\n                        iff(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))))\n| extend LearnUrl = strcat(\"https://learn.microsoft.com/en-us/search/?scope=BusinessCentral&terms=\", replace_string(submsg,\" \",\"+\"))\n| extend eventId = customDimensions.eventId\n    , status = iif(submsg has \"called\" \n                    or submsg has \"executed\"\n                        or submsg has 'executed'\n                            or submsg has 'succeeded'\n                                or submsg has 'rendered'\n                                    or submsg has 'successfully'\n                                        or submsg has 'taken', \"success\",\n                    iif(submsg has \"error\"\n                            or submsg has 'fail'\n                                or submsg has 'failed'\n                                    or submsg has 'deadlock'\n                                        or submsg has 'timed out',\"error\",\n                        iif(message has 'exceeded', 'too slow',\n                            \"unknown\")))\n| summarize count = count() by tostring(eventId), tostring(submsg), status, LearnUrl\n| project eventId, submsg, status, count, LearnUrl\n| order by ['count'] desc\n",
            "id": "e5378610-84e7-4891-832e-045cc28447ef",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_eventId"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "externaldata(EventID :string, Area:string, Message:string)\n        [h@'https://www.dropbox.com/scl/fi/0oh1kxqldoq6ujf5u45g7/Signals.json?rlkey=057i56lcivyxh0f8pcwq6fcfv&dl=1']\n            with(format='multijson')\n| where Message contains _MessageFilter\n| where Area has_any (_Area);",
            "id": "02912e9b-479d-40ee-b7b5-2b31ab9e0b78",
            "usedVariables": [
                "_Area",
                "_MessageFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let SignalDefinitions = externaldata(EventID :string, Area:string, Message:string)\n        [h@'https://www.dropbox.com/scl/fi/0oh1kxqldoq6ujf5u45g7/Signals.json?rlkey=057i56lcivyxh0f8pcwq6fcfv&dl=1']\n            with(format='multijson');\nlet AllEvents = traces \n    | where timestamp between (_startTime .. _endTime)\n    | where isnotempty(customDimensions.eventId)\n    | extend eventId = customDimensions.eventId\n    | summarize count = count() by tostring(eventId);\nAllEvents\n| join kind=fullouter SignalDefinitions on $left.eventId == $right.EventID \n| project EventID, eventId, count, Area, Message\n| where Message contains _MessageFilter\n| where Area has_any (_Area)\n| order by ['count'] desc",
            "id": "0247818d-c670-45e9-aa58-eff3d716ce56",
            "usedVariables": [
                "_Area",
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Custom Events in the base app\ntraces\n| where timestamp between (_startTime .. _endTime) \n| where customDimensions.eventId startswith \"AL\"\n| where customDimensions.extensionPublisher == 'Microsoft'\n| extend eventId = tostring(customDimensions.eventId)\n| extend submsg = iif(substring(message, 0, 4) == \"Task\", \"Task Executed\", \n                    iif(customDimensions.eventId == \"AL0000JRG\", \"Job Queue Error\",\n                        iff(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))))\n| where submsg contains _MessageFilter\n| summarize count() by eventId, submsg\n| order by count_ desc",
            "id": "4b55db01-ebc3-415d-9294-400f4b64efd4",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "//Custom Events in everything but Microsoft\ntraces\n| where timestamp between (_startTime .. _endTime) \n| where customDimensions.eventId startswith \"AL\"\n| where customDimensions.extensionPublisher <> 'Microsoft'\n| extend eventId = tostring(customDimensions.eventId)\n| extend submsg = iif(substring(message, 0, 4) == \"Task\", \"Task Executed\", \n                    iif(customDimensions.eventId == \"AL0000JRG\", \"Job Queue Error\",\n                        iff(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))))\n| where submsg contains _MessageFilter\n| extend extensionPublisher = tostring(customDimensions.extensionPublisher)\n| summarize count() by extensionPublisher, eventId, submsg\n| order by count_ desc",
            "id": "fe5ecfb2-f74c-4f41-96a1-cf0f75cdffde",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "//TelemetryOnTests - Overview\n\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where tostring(customDimensions.eventId) in (\"ALIFCTST0001\", \"ALIFCTST0002\", \"ALIFCTST0003\")\n| extend\n    timestamp = timestamp\n    , eventId = customDimensions.eventId\n    , TestSuiteName = tostring(customDimensions.alTestSuiteName)\n    , CodeunitId = tostring(customDimensions.alCodeunitId)\n    , CodeunitName = tostring(customDimensions.alName)\n    , MethodName = tostring(customDimensions.alMethodName)\n    , StartTime = tostring(customDimensions.alStartTime)\n    , EndTime = tostring(customDimensions.alEndTime)\n    , NoOfReads = tostring(customDimensions.alNoOfReads)\n    , NoOfSqlStatements = tostring(customDimensions.alNoOfSQLStatements)\n    , DurationMs = tostring(customDimensions.alDurationMs)\n    , Result = tostring(customDimensions.alResult)\n| extend Method = strcat(CodeunitName, '.',MethodName)\n| where Method contains _MessageFilter or message  contains _MessageFilter\n| project\n    timestamp,\n    eventId,\n    TestSuiteName,\n    CodeunitId,\n    CodeunitName,\n    MethodName,\n    StartTime,\n    EndTime,\n    Result,\n    NoOfReads,\n    NoOfSqlStatements,\n    DurationMs\n| order by timestamp desc",
            "id": "301dcad5-9b2d-405c-856f-5710eed4301b",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "//TelemetryOnTests - Overview\nlet BeginningOfPeriod = \ntraces\n| where timestamp between (_startTime .. _startTime + 2d)\n| where tostring(customDimensions.eventId) == \"ALIFCTST0003\"\n| extend CodeunitName = tostring(customDimensions.alName)\n    , MethodName = tostring(customDimensions.alMethodName)\n    , NoOfSqlStatements = toint(customDimensions.alNoOfSQLStatements)\n| extend Method = strcat(CodeunitName,'.',MethodName)\n| where Method contains _MessageFilter or message  contains _MessageFilter\n| summarize avgNoOfSqlStatements=avg(NoOfSqlStatements) by Method;\nlet EndOfPeriod = \ntraces\n| where timestamp between (_endTime - 2d .. _endTime)\n| where tostring(customDimensions.eventId) == \"ALIFCTST0003\"\n| extend CodeunitName = tostring(customDimensions.alName)\n    , MethodName = tostring(customDimensions.alMethodName)\n    , NoOfSqlStatements = toint(customDimensions.alNoOfSQLStatements)\n| extend Method = strcat(CodeunitName,'.',MethodName)\n| where Method contains _MessageFilter or message  contains _MessageFilter\n| summarize avgNoOfSqlStatements=avg(NoOfSqlStatements) by Method;\nlet Difference = \nBeginningOfPeriod\n| join kind=leftouter EndOfPeriod on $left.Method == $right.Method\n| extend Difference =  avgNoOfSqlStatements1 - avgNoOfSqlStatements\n| order by Difference desc\n| take 100;\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where tostring(customDimensions.eventId) == \"ALIFCTST0003\"\n| extend\n    CodeunitId = tostring(customDimensions.alCodeunitId)\n    , CodeunitName = tostring(customDimensions.alName)\n    , MethodName = tostring(customDimensions.alMethodName)\n    , NoOfSqlStatements = toint(customDimensions.alNoOfSQLStatements)\n| extend Method = strcat(CodeunitName,'.',MethodName)\n| join kind=rightouter Difference on $left.Method == $right.Method\n| project timestamp, Method, NoOfSqlStatements\n| summarize avgNoOfSqlStatements=avg(NoOfSqlStatements) by Method, bin(timestamp, 1d)\n| order by Method\n// | summarize count() by Method\n// traces\n// | where timestamp between (_startTime .. _endTime)\n// | where tostring(customDimensions.eventId) == \"ALIFCTST0003\"\n// | extend\n//     CodeunitId = tostring(customDimensions.alCodeunitId)\n//     , CodeunitName = tostring(customDimensions.alName)\n//     , MethodName = tostring(customDimensions.alMethodName)\n//     , NoOfSqlStatements = toint(customDimensions.alNoOfSQLStatements)\n// | extend Method = strcat(CodeunitName,'.',MethodName)\n// | project timestamp, Method, NoOfSqlStatements\n// | join Difference on $left.Method == $right.Method\n// | summarize avgNoOfSqlStatements=avg(NoOfSqlStatements) by Method, bin(timestamp, 1d)\n// | order by Method\n\n",
            "id": "bb13bc7c-1580-415e-ab82-d6275ab5dc7e",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'ALIFCTLM0002'\n| extend Duration = toint(customDimensions.alDuration)\n    , NoSqlStatements = toint(customDimensions.alNoSqlStatements)\n| project timestamp, tenantDescription, message, Duration, NoSqlStatements",
            "id": "15432824-d23f-461a-a1e1-bd8a16d045f9",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'ALIFCTLM0002'\n| extend Duration = toint(customDimensions.alDuration)\n    , NoSqlStatements = toint(customDimensions.alNoSqlStatements)\n| project timestamp, tenantDescription, message, Duration, NoSqlStatements\n| summarize count(), avgDuration = toint(avg(Duration)), avgNoSqlStatements = toint(avg(NoSqlStatements)) by message, tenantDescription",
            "id": "5a6f47e4-e5fd-4628-a326-442d90d84071",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'ALIFCTLM0002'\n| extend Duration = toint(customDimensions.alDuration)\n    , NoSqlStatements = toint(customDimensions.alNoSqlStatements)\n| project timestamp, tenantDescription, message, Duration, NoSqlStatements\n| summarize avgDuration = toint(avg(Duration)), avgNoSqlStatements = toint(avg(NoSqlStatements)) by message, tenantDescription, bin(timestamp, 1d)",
            "id": "cf09ab4b-b3e5-4b86-8131-739cf4a4c197",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "//Missing indexes Per Index\nAllTracesWithDefaultFilters_DistriApps\n| where customDimensions.eventId == \"ALIFCTLM0001\"\n| extend eventId = tostring(customDimensions.eventId)\n    , CompanyName = tostring(customDimensions.alCompany)\n    , TableName = tostring(customDimensions.alTableName)\n    , EqualityColumns = tostring(customDimensions.alEqualityColumns)\n    , InequalityColumns = tostring(customDimensions.alInequalityColumns)\n    , IncludeColumns = tostring(customDimensions.alIncludeColumns)\n| where TableName contains _tableFilter\n| where CompanyName !contains \"CRONUS\"\n| where CompanyName !contains \"My Company\"\n| project timestamp, tenantDescription, TableName,EqualityColumns,InequalityColumns,IncludeColumns\n// | summarize count_ = count() by TableName,EqualityColumns,InequalityColumns,IncludeColumns\n// | order by TableName,EqualityColumns,InequalityColumns,IncludeColumns\n// | project count_, TableName,EqualityColumns,InequalityColumns,IncludeColumns",
            "id": "3dab323e-751c-48b3-a9d6-bac0e790918d",
            "usedVariables": [
                "AllTracesWithDefaultFilters_DistriApps",
                "_tableFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Missing indexes Per Index\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == \"ALIFCTLM0001\"\n| extend eventId = tostring(customDimensions.eventId)\n    , CompanyName = tostring(customDimensions.alCompany)\n    , TableName = tostring(customDimensions.alTableName)\n    , EqualityColumns = tostring(customDimensions.alEqualityColumns)\n    , InequalityColumns = tostring(customDimensions.alInequalityColumns)\n    , IncludeColumns = tostring(customDimensions.alIncludeColumns)\n| where TableName contains _tableFilter\n| where CompanyName !contains \"CRONUS\"\n| where CompanyName !contains \"My Company\"\n| summarize by bin(timestamp, 1d), aadTenantId, TableName,EqualityColumns,InequalityColumns,IncludeColumns\n| summarize count_ = count() by TableName,EqualityColumns,InequalityColumns,IncludeColumns\n| order by count_ desc \n| project count_,  TableName,EqualityColumns,InequalityColumns,IncludeColumns",
            "id": "02486b0e-518e-46da-92d8-6cc2ba08e53a",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_tableFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where timestamp between (_endTime - 1d .. _endTime)\n| where customDimensions contains \"ALIFCTLM0001\"\n| extend eventId = tostring(customDimensions.eventId)\n    , CompanyName = tostring(customDimensions.alCompany)\n    , TableName = tostring(customDimensions.alTableName)\n    , EqualityColumns = tostring(customDimensions.alEqualityColumns)\n    , InequalityColumns = tostring(customDimensions.alInequalityColumns)\n    , IncludeColumns = tostring(customDimensions.alIncludeColumns)\n| where CompanyName !contains \"CRONUS\"\n| where CompanyName !contains \"My Company\"\n| summarize by CompanyName, TableName,EqualityColumns,InequalityColumns,IncludeColumns\n| summarize count_ = count() by CompanyName\n| order by count_ desc \n",
            "id": "2bb81e83-9211-4bec-83b0-5baff0d35e08",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_endTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Missing indexes over time\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == \"ALIFCTLM0001\"\n| extend eventId = tostring(customDimensions.eventId)\n    , TableName = tostring(customDimensions.alTableName)\n    , EqualityColumns = tostring(customDimensions.alEqualityColumns)\n    , InequalityColumns = tostring(customDimensions.alInequalityColumns)\n    , IncludeColumns = tostring(customDimensions.alIncludeColumns)\n| summarize by bin(timestamp, 1d), tenantDescription, TableName,EqualityColumns,InequalityColumns,IncludeColumns\n| summarize count_ = count() by bin(timestamp, 1d), tenantDescription\n| order by count_ desc ",
            "id": "5cff630c-ef14-4e1f-b40e-9d3a6a698867",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Orphans\n\nAllTracesWithDefaultFilters_Customers\n| where tostring(customDimensions.eventId) in (\"ALIFCTLM0003\", \"ALIFCTLM0004\", \"ALIFCTLM0005\", \"ALIFCTLM0006\")\n| extend aadTenantId = tostring(customDimensions.aadTenantId)\n| project timestamp, tenantDescription, message\n| order by timestamp desc\n",
            "id": "825f089d-15a9-46b2-a443-dab91abe062d",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Orphans Problems!\n\nAllTracesWithDefaultFilters_Customers\n| where tostring(customDimensions.eventId) in (\"ALIFCTLM0003\", \"ALIFCTLM0005\")\n| extend NoOfOrphans = toint(customDimensions.alNoOfOrphans)\n| project timestamp, tenantDescription, message, NoOfOrphans\n| summarize NoOfOrphans = toint(avg(NoOfOrphans)) by bin(timestamp, 1d), tenantDescription, message\n| order by timestamp desc\n",
            "id": "932751d1-6d30-4c2e-a0ce-c27de5075c1c",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Orphans Problems!\n\nAllTracesWithDefaultFilters_Customers\n| where timestamp between (_endTime - 1d .. _endTime)\n| where tostring(customDimensions.eventId) in (\"ALIFCTLM0003\", \"ALIFCTLM0005\")\n| extend NoOfOrphans = toint(customDimensions.alNoOfOrphans)\n| project timestamp, tenantDescription, message, NoOfOrphans\n| summarize NoOfOrphans = toint(avg(NoOfOrphans)) by bin(timestamp, 1d), tenantDescription , message\n| order by timestamp desc\n",
            "id": "b280d7b0-9d91-4519-ac8d-402a08809e2d",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_endTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Many Joins - base query\nAllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement)  // I need to analyze SQL Statement\n| where isnotempty(customDimensions.alStackTrace)  // Actionable\n| where customDimensions.extensionPublisher <> 'Microsoft'\n| extend numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n| where not(customDimensions.alObjectType in (\"Page\")) \n| where customDimensions.sqlStatement startswith \"SELECT\" \n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    // , extensionName = customDimensions.extensionName\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = customDimensions.componentVersion\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project aadTenantId, companyName, componentVersion, extensionPublisher, extensionName, numberOfColumnsSelected, numberOfJoins, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN\n| order by numberOfColumnsSelected, numberOfJoins desc\n| take 1000\n",
            "id": "4e4c1175-f51c-4a95-a505-e62068f35f25",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Many Joins - By Table\nAllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement)\n| where isnotempty(customDimensions.alStackTrace)\n| extend numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n| where not(customDimensions.alObjectType in (\"Page\"))\n| where customDimensions.sqlStatement startswith \"SELECT\"\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| where numberOfColumnsSelected > 20\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n// | project TenantId, extensionPublisher, extensionName, companyName, numberOfColumnsSelected, numberOfJoins, executionTimeInMS, ObjectType, ObjectId, ObjectName, clientType, StackTrace, eventId, message, tablename, sqlStatement, extensionIdsFromJOIN, componentVersion\n| summarize avgExecutionTime = toint(avg(executionTimeInMS)), avgnumberOfColumns = toint(avg(numberOfColumnsSelected)), count = count() by aadTenantId, companyName, componentVersion, extensionName\n| order by avgnumberOfColumns desc \n\n",
            "id": "adf15579-17d1-4526-a373-0957fc9f69d6",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "//Many Joins - By Table\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.aadTenantId has_any (_entraTenantId)\n| where isnotempty(customDimensions.sqlStatement)\n| where isnotempty(customDimensions.alStackTrace)\n| extend numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n| where numberOfJoins > 2 // adjust as needed\n| where not(customDimensions.alObjectType in (\"Page\"))\n| where customDimensions.sqlStatement startswith \"SELECT\"\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , TenantId = strcat(customDimensions.aadTenantId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionName = customDimensions.extensionName\n    , extensionPublisher = customDimensions.extensionPublisher\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project TenantId, extensionPublisher, extensionName, companyName, numberOfColumnsSelected, numberOfJoins, executionTimeInMS, ObjectType, ObjectId, ObjectName, clientType, StackTrace, eventId, message, tablename, sqlStatement, extensionIdsFromJOIN\n| summarize avgExecutionTime = toint(avg(executionTimeInMS)), avgnumberOfColumns = toint(avg(numberOfColumnsSelected)), count = count() by tablename\n| order by ['count'] desc \n| take 1000\n",
            "id": "e1a32997-8e14-43dd-a9e6-dd2eed692298",
            "usedVariables": [
                "_endTime",
                "_entraTenantId",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT TOP 1 NULL\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project aadTenantId, companyName, componentVersion, extensionPublisher, extensionName\n    , executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement,customDimensions\n| take 1000\n",
            "id": "dca21fc1-e6f6-459d-bff7-c72108795bc7",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": " // Any IsEmpty that we can find in Telemetry that is locking\n // By ExtensionName\n\nAllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT TOP 1 NULL\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n// | project TenantId, extensionPublisher, extensionName, companyName, numberOfColumnsSelected, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN\n| summarize count = count() by tenantDescription,  tostring(extensionName), componentVersion\n| order by count desc \n",
            "id": "776a635c-6ff1-4749-ad61-9e5bb2182b48",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT SUM\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project aadTenantId, companyName, componentVersion, extensionName, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement,  customDimensions\n| take 1000\n",
            "id": "a967a2fe-5407-41b1-8c82-3651cb125c79",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": " // Any IsEmpty that we can find in Telemetry that is locking\n // By ExtensionName\n\nAllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT SUM\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n// | project TenantId, extensionPublisher, extensionName, companyName, numberOfColumnsSelected, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN\n| summarize count = count() by tenantDescription,  tostring(extensionName), componentVersion\n| order by count desc \n",
            "id": "5972df64-ef68-4fa4-a3d0-ed0ffd4b5e41",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT COUNT\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project aadTenantId, componentVersion, extensionName, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN, customDimensions\n| take 1000\n",
            "id": "25fea7fd-91f0-44c7-a592-c74398eded5e",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": " // Any IsEmpty that we can find in Telemetry that is locking\n // By ExtensionName\n\nAllTracesWithDefaultFilters_Customers\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // Actionable\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT COUNT\"\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n    , componentVersion = tostring(customDimensions.componentVersion)\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n// | project TenantId, extensionPublisher, extensionName, companyName, numberOfColumnsSelected, executionTimeInMS, ObjectType, ObjectId, ObjectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN\n| summarize count = count() by tenantDescription,  tostring(extensionName), componentVersion\n| order by count desc \n",
            "id": "f31ab0c2-398a-4193-9997-00660d1d01d6",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "    // DeadLocks - Last ones\r\n    AllTracesWithDefaultFilters_Customers\r\n    | where customDimensions has 'RT0028'\r\n    | where customDimensions.eventId == 'RT0028'\r\n    | where customDimensions.alObjectId != '0' \r\n    | where isnotempty(customDimensions.alObjectId)\r\n    | extend ObjectType = tostring(customDimensions.alObjectType)\r\n        , ObjectId = tostring(customDimensions.alObjectId)\r\n        , ObjectName = tostring(customDimensions.alObjectName)\r\n        , sqlStatement = tostring(customDimensions.sqlStatement)\r\n        , companyName = tostring(customDimensions.companyName)        \r\n        , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \r\n        , userId = user_Id\r\n    | extend operationType = case(\r\n        sqlStatement startswith \"UPDATE\", \"UPDATE\"\r\n        , sqlStatement startswith \"DELETE\", \"DELETE\"\r\n        , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\r\n        , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\r\n        , sqlStatement startswith \"SELECT\", \"SELECT\"\r\n        , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\r\n        , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\r\n        , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\r\n        , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\r\n        , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\r\n        , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\r\n        , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \r\n        , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\r\n        , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\r\n        , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\r\n        , \"UNKNOWN\"\r\n        ) \r\n    | parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\r\n    | extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\r\n    | extend lengthStacktrace = array_length(splitStacktrace)\r\n    | extend\r\n        LockingObject = splitStacktrace[0],\r\n        SourceProcess = splitStacktrace[lengthStacktrace - 1]\r\n    | where SourceProcess contains _sourceObjectFilter\r\n    | where LockingObject contains _SlowObjectFilter\r\n    | project\r\n        timestamp,\r\n        tenantDescription,\r\n        userId,\r\n        companyName,\r\n        ObjectType,\r\n        ObjectId,\r\n        ObjectName,\r\n        numberOfJoins,\r\n        LockingObject,\r\n        SourceProcess,\r\n        operationType,\r\n        sqlStatement,\r\n        splitStacktrace,\r\n        customDimensions\r\n    | order by timestamp desc \r\n\r\n",
            "id": "38d0a40a-e1c8-43a0-b07c-2f6a4af53fc3",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - By Customer\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions has 'RT0028'\n| where customDimensions.eventId == 'RT0028'\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n    , stackTrace = tostring(customDimensions.alStackTrace)\n    , componentVersion = tostring(customDimensions.componentVersion)\n    , userId = user_Id\n| where ObjectName contains _sourceObjectFilter\n| parse kind=regex sqlStatement with selectPart: string \"FROM \" tablename: string\n| project timestamp, companyName, componentVersion, ObjectType, ObjectId, ObjectName, numberOfJoins, stackTrace, sqlStatement, tablename, customDimensions\n| summarize count = count() by companyName, componentVersion\n| order by count desc \n\n",
            "id": "6f2c9fc4-913c-4c16-a95a-dc58fa5fa8fe",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - By Day\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions has 'RT0028'\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n    , stackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| where ObjectName contains _sourceObjectFilter\n| parse kind=regex sqlStatement with selectPart: string \"FROM \" tablename: string\n| project timestamp, tenantDescription, companyName, ObjectType, ObjectId, ObjectName, numberOfJoins, stackTrace, sqlStatement, tablename, customDimensions\n| summarize count = count() by bin(timestamp, 1h), companyName\n",
            "id": "b1133f97-4203-4fd2-8205-71e34abe87b6",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - by Source Process\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , componentVersion = tostring(customDimensions.componentVersion)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project\n    timestamp,\n    aadTenantId,\n    tenantDescription,\n    companyName,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,\n    topOfStackPublisher,\n    SourceProcess,\n    StackTrace,\n    customDimensions,\n    componentVersion,\n    sqlStatement\n| extend ExtensionName = iif(LockingObjectExtension contains \"iFacto\" \n        or LockingObjectExtension contains \"Single\"\n        or LockingObjectExtension contains \"Distri\"\n        or LockingObjectExtension contains \"Commerce\"\n        or topOfStackPublisher contains \"Microsoft\"\n            , LockingObjectExtension, 'PTE')\n| summarize count = count() by componentVersion, tostring(SourceProcess), tostring(companyName), tostring(ExtensionName), tostring(LockingObject), tostring(LockingObjectId), tostring(LockingObjectMethod),tostring(operationType)\n| order by ['count'],SourceProcess desc \n\n\n",
            "id": "094a8df7-535d-4218-b9a7-c6b52f4bc72b",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - by Source Process\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0028'\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project\n    timestamp,\n    aadTenantId,\n    companyName,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,    \n    SourceProcess,\n    StackTrace,\n    customDimensions\n| summarize count = count() by tostring(LockingObject)\n| order by ['count'],LockingObject desc \n\n\n",
            "id": "591c9099-a79d-4cb7-af9b-8da336877861",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - by Source Process\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0028'\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project\n    timestamp,\n    aadTenantId,\n    tenantDescription,\n    companyName,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,    \n    SourceProcess,\n    StackTrace,\n    customDimensions\n| summarize count = count() by tostring(SourceProcess)\n| order by ['count'],SourceProcess desc \n\n\n",
            "id": "4dee6fb0-18f4-4a6b-ada7-0eb763e72145",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// Lock Timeouts - Last ones\r\nAllTracesWithDefaultFilters_Customers\r\n| where customDimensions has 'RT0012'\r\n| where customDimensions.eventId == 'RT0012'\r\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\r\n| where customDimensions.alObjectId != '0' \r\n| where isnotempty(customDimensions.alObjectId)\r\n| extend ObjectType = tostring(customDimensions.alObjectType)\r\n    , ObjectId = tostring(customDimensions.alObjectId)\r\n    , ObjectName = tostring(customDimensions.alObjectName)\r\n    , sqlStatement = tostring(customDimensions.sqlStatement)\r\n    , companyName = tostring(customDimensions.companyName)        \r\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \r\n    , userId = user_Id\r\n| extend operationType = case(\r\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\r\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\r\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\r\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\r\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\r\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\r\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\r\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\r\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\r\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\r\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\r\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \r\n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\r\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\r\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\r\n    , \"UNKNOWN\"\r\n    ) \r\n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\r\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\r\n| extend lengthStacktrace = array_length(splitStacktrace)\r\n| extend\r\n    LockingObject = splitStacktrace[0],\r\n    SourceProcess = splitStacktrace[lengthStacktrace - 1]\r\n| where SourceProcess contains _sourceObjectFilter\r\n| where LockingObject contains _SlowObjectFilter\r\n| project\r\n    timestamp,\r\n    aadTenantId,\r\n    tenantDescription,\r\n    userId,\r\n    companyName,\r\n    ObjectType,\r\n    ObjectId,\r\n    ObjectName,\r\n    numberOfJoins,\r\n    LockingObject,\r\n    SourceProcess,\r\n    operationType,\r\n    sqlStatement,\r\n    splitStacktrace,\r\n    customDimensions\r\n| order by timestamp desc \r\n\r\n",
            "id": "43a64111-354c-4b1e-b4f9-4087a8a85afa",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - By Customer\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions has 'RT0012'\n| where customDimensions.eventId == 'RT0012'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n    , stackTrace = tostring(customDimensions.alStackTrace)\n    , componentVersion = tostring(customDimensions.componentVersion)\n    , userId = user_Id\n| parse kind=regex sqlStatement with selectPart: string \"FROM \" tablename: string\n    | extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n    | extend lengthStacktrace = array_length(splitStacktrace)\n    | extend\n        LockingObject = splitStacktrace[0],\n        SourceProcess = splitStacktrace[lengthStacktrace - 1]\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project timestamp, tenantDescription, componentVersion, companyName, ObjectType, ObjectId, ObjectName, numberOfJoins, stackTrace, sqlStatement, tablename, customDimensions\n| summarize count = count() by companyName, componentVersion\n| order by count desc \n\n",
            "id": "d28506c3-6290-4a90-b507-328b79cddcee",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// Lock Timeouts - By Day\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions has 'RT0012'\n| where customDimensions.eventId == 'RT0012'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n    , stackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| where ObjectName contains _sourceObjectFilter\n| parse kind=regex sqlStatement with selectPart: string \"FROM \" tablename: string\n| project timestamp, tenantDescription, companyName, ObjectType, ObjectId, ObjectName, numberOfJoins, stackTrace, sqlStatement, tablename, customDimensions\n| summarize count = count() by bin(timestamp, 1h), companyName\n",
            "id": "4470f98b-96f0-467f-abd8-e5567f539cdf",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// Lock Timeouts - by Source Process\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0012'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project\n    timestamp,\n    aadTenantId,\n    companyName,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,    \n    SourceProcess,\n    StackTrace,\n    customDimensions\n| summarize count = count() by tostring(SourceProcess)\n| order by ['count'],SourceProcess desc \n\n\n",
            "id": "7f52dca6-2c79-4955-8d19-d0353e248111",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "// DeadLocks - by Source Process\n\nAllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0012'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where SourceProcess contains _sourceObjectFilter\n| where LockingObject contains _SlowObjectFilter\n| project\n    timestamp,\n    aadTenantId,\n    companyName,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,    \n    SourceProcess,\n    StackTrace,\n    customDimensions\n| summarize count = count() by tostring(LockingObject)\n| order by ['count'],LockingObject desc \n\n\n",
            "id": "685f320c-b46b-4010-80c1-74169f5d6dcb",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty( customDimensions.endpoint)\n| extend endpoint = tostring(customDimensions.endpoint)\n    , eventId = tostring(customDimensions.eventId)\n// | project timestamp, aadTenantId, companyName, endpoint, totalTime\n| summarize count(), avgTime = toint(avg(elapsedTimeInMS)), totalTime = sum(elapsedTimeInMS) by tenantDescription\n| order by avgTime desc \n",
            "id": "47998632-9b91-475a-8b5d-e9b824a70673",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty( customDimensions.endpoint)\n| extend totalTime = toint(totimespan(customDimensions.totalTime)/10000)\n    , endpoint = tostring(customDimensions.endpoint)\n    , eventId = tostring(customDimensions.eventId)\n| summarize count(), avgTime = toint(avg(totalTime)), totalTime = sum(totalTime) by bin(timestamp,1d), tenantDescription\n| take 10",
            "id": "7b447e46-2578-4bba-ac9d-a55569727ace",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllSignals_Customers\n| where eventId contains _eventId\n| where timestamp >= ago(90d)\n| summarize count() by bin(timestamp,1d)",
            "id": "9342f2ed-1ac6-4c33-ab85-877cdbe5bf59",
            "usedVariables": [
                "AllSignals_Customers",
                "_eventId"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0008' //WebServiceCalled\n| extend decentMessage = iif(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))\n, endpoint = tostring(customDimensions.endpoint)\n, alObjectName = tostring(customDimensions.alObjectName)\n, serverExecutionTime = tostring(customDimensions.serverExecutionTime)\n, serverExecutionTimeInMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000 //the datatype for executionTime is timespan \n, totalTime = tostring(customDimensions.totalTime)\n, totalTimeInMS = toreal(totimespan(customDimensions.totalTime))/10000 //the datatype for executionTime is timespan \n| where alObjectName contains _sourceObjectFilter\n| summarize count = count(), avgServerExecutionTimeInMS = avg(serverExecutionTimeInMS), avgTotalTimeInMs = avg(totalTimeInMS) by alObjectName, endpoint\n| project \n    endpoint\n    , alObjectName\n    , ['count']\n    , avgServerExecutionTimeInMS = round(avgServerExecutionTimeInMS,0)\n    , avgTotalTimeInMs = round(avgTotalTimeInMs, 0)\n    , ApproxTime = round(['count'] * avgServerExecutionTimeInMS,0)\n| order by ApproxTime desc ",
            "id": "46c51880-d6c6-41d7-811e-58429e0ae286",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where eventId contains _eventId\n| where aadTenantId <> 'common' //Remove docker stuff (Not interesting in this graph)\n// | where timestamp between (_startTime .. _endTime)\n// | extend aadTenantId = tostring(substring(customDimensions.aadTenantId,1,strlen(customDimensions.aadTenantId)-2))\n// | where aadTenantId has_any (_entraTenantId)\n| summarize count() by tenantDescription\n// | project Customer = iif(isnotempty( tenantDescription), strcat(aadTenantId, \" (\",tenantDescription,\")\"),aadTenantId), count_\n| order by count_ desc \n| take 10",
            "id": "29ed362b-db00-426b-8a7d-2604200272c5",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_eventId"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let BaseQuery = AllTracesWithDefaultFilters_Customers | count | extend Desc = 'BaseQuery (including PageViews)';\nlet TracesTable = traces | where timestamp between (_startTime .. _endTime)| count | extend Desc = 'TracesTable'; \nlet PageViewsTable = pageViews | where timestamp between (_startTime .. _endTime)| count | extend Desc = 'PageViewsTable'; \nlet AllSignalsBaseQuery = AllSignals_Customers | where timestamp between (_startTime .. _endTime)| count | extend Desc = 'AllSignals (including PageViews)'; \nBaseQuery \n| union TracesTable \n| union AllSignalsBaseQuery\n| union PageViewsTable",
            "id": "fd338a5f-a63c-494d-846f-d64af8d857a0",
            "usedVariables": [
                "AllSignals_Customers",
                "AllTracesWithDefaultFilters_Customers",
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "externaldata(entraTenantId :string, tenantDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/a8azyia77owvtb4m9wjhi/entraTenantId.json?rlkey=ene62tb29pvrm78adk3ifs8nw&dl=1']\n            with(format='multijson');",
            "id": "b86ff589-0f6d-450d-bc57-f785b3a9c35a",
            "usedVariables": []
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let averageCount = \n    toscalar(AllTracesWithDefaultFilters_Customers\n    | where isnotempty( elapsedTimeInMS)\n    | summarize count() by tenantDescription, eventDescription, eventId\n    | summarize toint(avg(count_)));\nAllTracesWithDefaultFilters_Customers\n| where isnotempty( elapsedTimeInMS)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n| where ObjectId contains _sourceObjectFilter\n| summarize toint(avg(elapsedTimeInMS)), count() by tenantDescription, eventDescription, eventId\n| where count_ >= averageCount\n| order by avg_elapsedTimeInMS desc\n| take 100  \n",
            "id": "7b092ba5-f9dd-4a62-8454-b81f5384400a",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0008' //WebServiceCalled\n| extend decentMessage = iif(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))\n, endpoint = tostring(customDimensions.endpoint)\n, alObjectName = tostring(customDimensions.alObjectName)\n, serverExecutionTime = tostring(customDimensions.serverExecutionTime)\n, serverExecutionTimeInMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000 //the datatype for executionTime is timespan \n, totalTime = tostring(customDimensions.totalTime)\n, totalTimeInMS = toreal(totimespan(customDimensions.totalTime))/10000 //the datatype for executionTime is timespan \n| where alObjectName contains _sourceObjectFilter\n| summarize count() by bin(timestamp, 1h), tenantDescription\n",
            "id": "1bf1ec03-a8e5-4032-96db-e97cc928023c",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where customDimensions.eventId == 'RT0008' //WebServiceCalled\n| extend decentMessage = iif(indexof(message, \":\") <= 0, message, substring(message, 0, indexof(message, \":\")))\n, endpoint = tostring(customDimensions.endpoint)\n, alObjectName = tostring(customDimensions.alObjectName)\n, serverExecutionTime = tostring(customDimensions.serverExecutionTime)\n, serverExecutionTimeInMS = toint(totimespan(customDimensions.serverExecutionTime))/10000 //the datatype for executionTime is timespan \n, totalTime = tostring(customDimensions.totalTime)\n, totalTimeInMS = toint(totimespan(customDimensions.totalTime))/10000 //the datatype for executionTime is timespan \n, queryFilter = tostring(customDimensions.queryFilter)\n| where alObjectName contains _sourceObjectFilter\n| order by timestamp desc \n// | summarize count = count(), avgServerExecutionTimeInMS = avg(serverExecutionTimeInMS), avgTotalTimeInMs = avg(totalTimeInMS) by alObjectName, endpoint\n// | project \n//     endpoint\n//     , alObjectName\n//     , ['count']\n//     , avgServerExecutionTimeInMS = round(avgServerExecutionTimeInMS,0)\n//     , avgTotalTimeInMs = round(avgTotalTimeInMs, 0)\n//     , ApproxTime = round(['count'] * avgServerExecutionTimeInMS,0)\n// | order by ApproxTime desc ",
            "id": "54acac7b-c84e-48f5-a3b5-7b3d5b1cc5eb",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty( customDimensions.sqlStatement)\n| where isnotempty( customDimensions.alStackTrace)\n| where isnotempty( elapsedTimeInMS)\n| extend alObjectName = tostring(customDimensions.alObjectName)\n    , alObjectType = tostring(customDimensions.alObjectType)\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , extensionPublisher = tostring(customDimensions.extensionPublisher)\n    , companyName = tostring(customDimensions.companyName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , componentVersion = tostring(customDimensions.componentVersion)\n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = iif(tostring(splitStacktrace[0]) contains \"ObjectType\", tostring(splitStacktrace[2]), tostring(splitStacktrace[0]))\n    , bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , SlowObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| extend SourceProcess = iif(strlen( SourceProcess) >= 10, SourceProcess, trim(@\"[^\\w]+\",strcat(splitStacktrace[0], \" \", splitStacktrace[1])))\n| extend SlowObject = iif(strlen( SlowObject) >= 10, SlowObject, SourceProcess)\n| where SourceProcess contains _sourceObjectFilter\n| where SlowObject contains _SlowObjectFilter\n| project timestamp\n    , eventId\n    , message\n    , componentVersion\n    , tenantDescription\n    // , companyName\n    , extensionName\n    , extensionPublisher\n    , splitStacktrace\n    , SourceProcess\n    , SlowObject\n    , alObjectType\n    , alObjectName\n    , alObjectId\n    , elapsedTimeInMS\n    , customDimensions\n    , sqlStatement\n| order by timestamp desc \n| take 1000",
            "id": "b62f5ea9-fe88-4bbc-8c61-e6999a017385",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty( customDimensions.sqlStatement)\n| where isnotempty( customDimensions.alStackTrace)\n| where isnotempty( elapsedTimeInMS)\n| extend alObjectName = tostring(customDimensions.alObjectName)\n    , alObjectType = tostring(customDimensions.alObjectType)\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , extensionPublisher = tostring(customDimensions.extensionPublisher)\n    , companyName = tostring(customDimensions.companyName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , componentVersion = tostring(customDimensions.componentVersion)\n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = iif(tostring(splitStacktrace[0]) contains \"ObjectType\", tostring(splitStacktrace[2]), tostring(splitStacktrace[0]))\n    , bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , SlowObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| extend SourceProcess = iif(strlen( SourceProcess) >= 10, SourceProcess, trim(@\"[^\\w]+\",strcat(splitStacktrace[0], \" \", splitStacktrace[1])))\n| extend SlowObject = iif(strlen( SlowObject) >= 10, SlowObject, SourceProcess)\n| where SourceProcess contains _sourceObjectFilter\n| where SlowObject contains _SlowObjectFilter\n| project timestamp\n    , eventId\n    , message\n    , componentVersion\n    , tenantDescription\n    // , companyName\n    , extensionName\n    , extensionPublisher\n    , splitStacktrace\n    , SourceProcess\n    , SlowObject\n    , alObjectType\n    , alObjectName\n    , alObjectId\n    , elapsedTimeInMS\n    , customDimensions\n    , sqlStatement\n| summarize count(), avg(elapsedTimeInMS) by SlowObject",
            "id": "48849c14-b50e-49b7-916f-0238dacaca4c",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| where isnotempty( customDimensions.sqlStatement)\n| where isnotempty( customDimensions.alStackTrace)\n| where isnotempty( elapsedTimeInMS)\n| extend alObjectName = tostring(customDimensions.alObjectName)\n    , alObjectType = tostring(customDimensions.alObjectType)\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , extensionPublisher = tostring(customDimensions.extensionPublisher)\n    , companyName = tostring(customDimensions.companyName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , componentVersion = tostring(customDimensions.componentVersion)\n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = iif(tostring(splitStacktrace[0]) contains \"ObjectType\", tostring(splitStacktrace[2]), tostring(splitStacktrace[0]))\n    , bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , SlowObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| extend SourceProcess = iif(strlen( SourceProcess) >= 10, SourceProcess, trim(@\"[^\\w]+\",strcat(splitStacktrace[0], \" \", splitStacktrace[1])))\n| extend SlowObject = iif(strlen( SlowObject) >= 10, SlowObject, SourceProcess)\n| where SourceProcess contains _sourceObjectFilter\n| where SlowObject contains _SlowObjectFilter\n| project timestamp\n    , eventId\n    , message\n    , componentVersion\n    , tenantDescription\n    // , companyName\n    , extensionName\n    , extensionPublisher\n    , splitStacktrace\n    , SourceProcess\n    , SlowObject\n    , alObjectType\n    , alObjectName\n    , alObjectId\n    , elapsedTimeInMS\n    , customDimensions\n    , sqlStatement\n| summarize count(), toint(avg(elapsedTimeInMS)) by SlowObject\n| order by count_ desc ",
            "id": "76f4c75a-d946-48b9-ac09-42e4900ba460",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers",
                "_SlowObjectFilter",
                "_sourceObjectFilter"
            ]
        },
        {
            "id": "b4447fa9-6a67-4b52-9f4f-ebb809cdce7a",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let SignalDefinitions = externaldata(eventId :string, eventArea:string, eventDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/0oh1kxqldoq6ujf5u45g7/Signals.json?rlkey=057i56lcivyxh0f8pcwq6fcfv&dl=1']\n            with(format='multijson');\ntraces\n| union pageViews\n| extend elapsedTimeInMS = \n        iif(isnotempty(customDimensions.executionTime), toint(totimespan(customDimensions.executionTime))/10000\n        , iif(isnotempty(customDimensions.serverExecutionTime), toint(totimespan(customDimensions.serverExecutionTime))/10000\n            , iif(isnotempty(customDimensions.totalTime), toint(totimespan(customDimensions.totalTime))/10000\n                , iif(isnotempty(customMeasurements.durations), customMeasurements.durations\n                    , iif(isnotempty( customDimensions.alJobQueueExecutionTimeInMs), customDimensions.alJobQueueExecutionTimeInMs\n        , dynamic(null))))))\n| extend eventId = tostring(customDimensions.eventId)\n| join kind=leftouter SignalDefinitions on $left.eventId == $right.eventId",
            "usedVariables": []
        },
        {
            "id": "6be88230-711c-475b-ac25-4f5dc82ea567",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "let SignalDefinitions = externaldata(eventId :string, eventArea:string, eventDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/0oh1kxqldoq6ujf5u45g7/Signals.json?rlkey=057i56lcivyxh0f8pcwq6fcfv&dl=1']\n            with(format='multijson');\ntraces\n| union pageViews\n| extend elapsedTimeInMS = \n        iif(isnotempty(customDimensions.executionTime), toint(totimespan(customDimensions.executionTime))/10000\n        , iif(isnotempty(customDimensions.serverExecutionTime), toint(totimespan(customDimensions.serverExecutionTime))/10000\n            , iif(isnotempty(customDimensions.totalTime), toint(totimespan(customDimensions.totalTime))/10000\n                , iif(isnotempty(customMeasurements.durations), customMeasurements.durations\n                    , iif(isnotempty( customDimensions.alJobQueueExecutionTimeInMs), customDimensions.alJobQueueExecutionTimeInMs\n        , dynamic(null))))))\n| extend eventId = tostring(customDimensions.eventId)\n| join kind=leftouter SignalDefinitions on $left.eventId == $right.eventId",
            "usedVariables": []
        },
        {
            "id": "41eae0b2-ce5f-4a14-905e-1880e74c8276",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let entraTenantIdDescriptions = externaldata(entraTenantId :string, tenantDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/a8azyia77owvtb4m9wjhi/entraTenantId.json?rlkey=ene62tb29pvrm78adk3ifs8nw&dl=1']\n            with(format='multijson');\nAllSignals_Customers\n| extend aadTenantId = iif(strlen(customDimensions.aadTenantId)==36, substring(customDimensions.aadTenantId,1,strlen(customDimensions.aadTenantId)-2), customDimensions.aadTenantId) //Obfuscate the TenantId\n| extend extensionName = iif(isempty( customDimensions.extensionName), 'N/A',\n    iif(customDimensions.extensionPublisher !contains 'iFacto' and customDimensions.extensionPublisher !contains 'Microsoft', 'ISV',\n        iif( customDimensions.extensionName contains \"iFacto\" \n            or customDimensions.extensionName contains \"Single\"\n            or customDimensions.extensionName contains \"Distri\"\n            or customDimensions.extensionName contains \"Commerce\"\n                , customDimensions.extensionName, 'PTE')))\n| join kind=leftouter entraTenantIdDescriptions on $left.aadTenantId == $right.entraTenantId\n| extend entraTenantId = tostring(aadTenantId)\n| extend tenantDescription = iif(isempty( tenantDescription),tostring(aadTenantId),tenantDescription)",
            "usedVariables": [
                "AllSignals_Customers"
            ]
        },
        {
            "id": "6bb31b2e-59c5-4bb5-80fb-f6104d232c0b",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "let entraTenantIdDescriptions = externaldata(entraTenantId :string, tenantDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/a8azyia77owvtb4m9wjhi/entraTenantId.json?rlkey=ene62tb29pvrm78adk3ifs8nw&dl=1']\n            with(format='multijson');\nAllSignals_Distri\n| extend aadTenantId = iif(strlen(customDimensions.aadTenantId)==36, substring(customDimensions.aadTenantId,1,strlen(customDimensions.aadTenantId)-2), customDimensions.aadTenantId) //Obfuscate the TenantId\n| extend extensionName = iif(isempty( customDimensions.extensionName), 'N/A',\n    iif(customDimensions.extensionPublisher !contains 'iFacto' and customDimensions.extensionPublisher !contains 'Microsoft', 'ISV',\n        iif( customDimensions.extensionName contains \"iFacto\" \n            or customDimensions.extensionName contains \"Single\"\n            or customDimensions.extensionName contains \"Distri\"\n            or customDimensions.extensionName contains \"Commerce\"\n                , customDimensions.extensionName, 'PTE')))\n| join kind=leftouter entraTenantIdDescriptions on $left.aadTenantId == $right.entraTenantId\n| extend entraTenantId = tostring(aadTenantId)\n| extend tenantDescription = iif(isempty( tenantDescription),tostring(aadTenantId),tenantDescription)",
            "usedVariables": [
                "AllSignals_Distri"
            ]
        },
        {
            "id": "c16ecbde-301a-4165-b320-861ce72d9ddf",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTraces_Customers\n| where timestamp between (_startTime .. _endTime)\n| where message contains _MessageFilter\n| where aadTenantId has_any (_entraTenantId)\n| where tenantDescription has_any (_TenantDescription)",
            "usedVariables": [
                "AllTraces_Customers",
                "_MessageFilter",
                "_TenantDescription",
                "_endTime",
                "_entraTenantId",
                "_startTime"
            ]
        },
        {
            "id": "52c36f7f-5e57-40c8-b830-da83f744dd51",
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "d1beef7f-3df5-4cb4-b1bd-dfa9e1c8ee0d"
            },
            "text": "AllTraces_Distri\n| where timestamp between (_startTime .. _endTime)\n| where message contains _MessageFilter\n| where aadTenantId has_any (_entraTenantId)\n| where tenantDescription has_any (_TenantDescription)",
            "usedVariables": [
                "AllTraces_Distri",
                "_MessageFilter",
                "_TenantDescription",
                "_endTime",
                "_entraTenantId",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "externaldata(EventID :string, Area:string, Message:string)\n        [h@'https://www.dropbox.com/scl/fi/0oh1kxqldoq6ujf5u45g7/Signals.json?rlkey=057i56lcivyxh0f8pcwq6fcfv&dl=1']\n            with(format='multijson')\n| where Message contains _MessageFilter\n| summarize by Area;",
            "id": "6a47afd3-77c6-4aff-91bc-7bb75738d805",
            "usedVariables": [
                "_MessageFilter"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where isnotempty(customDimensions.aadTenantId)\n| extend entraTenantId = tostring(customDimensions.aadTenantId)\n| summarize by entraTenantId\n| project entraTenantId=iif(strlen(entraTenantId)==36, entraTenantId = substring(entraTenantId,1,strlen(entraTenantId)-2), entraTenantId) //Obfuscate the TenantId",
            "id": "71ca975a-d9b2-4d13-8d67-1d64db31474b",
            "usedVariables": [
                "_endTime",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "traces\n| where customDimensions.extensionPublisher <> 'Microsoft'\n| where isnotempty(customDimensions.extensionName)\n| extend extensionName = tostring(customDimensions.extensionName)\n| summarize by extensionName",
            "id": "36ef728f-ac65-40a1-bced-e736af02e457",
            "usedVariables": []
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "let entraTenantIdDescriptions = externaldata(entraTenantId :string, tenantDescription:string)\n        [h@'https://www.dropbox.com/scl/fi/a8azyia77owvtb4m9wjhi/entraTenantId.json?rlkey=ene62tb29pvrm78adk3ifs8nw&dl=1']\n            with(format='multijson');\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where message contains _MessageFilter\n| extend aadTenantId = iif(strlen(customDimensions.aadTenantId)==36, substring(customDimensions.aadTenantId,1,strlen(customDimensions.aadTenantId)-2), customDimensions.aadTenantId) //Obfuscate the TenantId\n| where aadTenantId has_any (_entraTenantId)\n| join kind=leftouter entraTenantIdDescriptions on $left.aadTenantId == $right.entraTenantId\n| extend entraTenantId = tostring(aadTenantId)\n| extend tenantDescription = iif(isempty( tenantDescription),tostring(aadTenantId),tenantDescription)\n| summarize by tenantDescription",
            "id": "d3d54edb-5018-4004-9043-613f0728f0b3",
            "usedVariables": [
                "_MessageFilter",
                "_endTime",
                "_entraTenantId",
                "_startTime"
            ]
        },
        {
            "dataSource": {
                "kind": "inline",
                "dataSourceId": "05ae5610-5603-45ac-9458-616539c1c150"
            },
            "text": "AllTracesWithDefaultFilters_Customers\n| summarize by eventId",
            "id": "9492a17c-eb5f-4b81-a06c-9dbc84c9249e",
            "usedVariables": [
                "AllTracesWithDefaultFilters_Customers"
            ]
        }
    ]
}